<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reliable Comparison of Floating Point Numbers • fpCompare</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Reliable Comparison of Floating Point Numbers">
<meta property="og:description" content="Comparisons of floating point numbers are problematic due to errors
    associated with the binary representation of decimal numbers.
    Despite being aware of these problems, people still use numerical methods
    that fail to account for these and other rounding errors (this pitfall is
    the first to be highlighted in Circle 1 of Burns (2012)
    The R Inferno &lt;http://www.burns-stat.com/pages/Tutor/R_inferno.pdf&gt;).
    This package provides new relational operators useful for performing
    floating point number comparisons with a set tolerance.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">fpCompare</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/fpCompare.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/PredictiveEcology/fpCompare">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<div id="fpcompare" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#fpcompare" class="anchor"></a>fpCompare</h1></div>

<div id="reliable-comparison-of-floating-point-numbers" class="section level2">
<h2 class="hasAnchor">
<a href="#reliable-comparison-of-floating-point-numbers" class="anchor"></a>Reliable comparison of floating point numbers</h2>
<p>Comparisons of floating point numbers are problematic due to errors associated with the binary representation of decimal numbers. Computer scientists and programmers are aware of these problems and yet people still use numerical methods which fail to account for floating point errors (this pitfall is the first to be highlighted in Circle 1 of Burns (2012) <a href="https://www.burns-stat.com/pages/Tutor/R_inferno.pdf">The R Inferno</a>).</p>
<p>To avoid these and other numerical rounding issues, R’s help file for relational operators (<em>e.g.</em>, <code><a href="https://rdrr.io/r/base/Comparison.html">?'&gt;'</a></code>) suggests using <code>identical</code> and <code>all.equal</code> when making numerical comparisons:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">x1 &lt;-<span class="st"> </span><span class="fl">0.5</span> <span class="op">-</span><span class="st"> </span><span class="fl">0.3</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">x2 &lt;-<span class="st"> </span><span class="fl">0.3</span> <span class="op">-</span><span class="st"> </span><span class="fl">0.1</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3">x1 <span class="op">==</span><span class="st"> </span>x2                           <span class="co"># FALSE on most machines</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw"><a href="https://rdrr.io/r/base/identical.html">identical</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/all.equal.html">all.equal</a></span>(x1, x2), <span class="ot">TRUE</span>) <span class="co"># TRUE everywhere</span></a></code></pre></div>
<p>Inspired by <a href="https://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-doesn_0027t-R-think-these-numbers-are-equal_003f">R FAQ 7.31</a> and <a href="https://stackoverflow.com/a/2769618/1380598">this Stack Overflow answer</a>, this package provides new relational operators useful for performing floating point number comparisons with a set tolerance:</p>
<table class="table">
<thead><tr class="header">
<th>
<strong><code>fpCompare</code></strong>[^1]</th>
<th><strong><code>base</code></strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code><a href="reference/relational-operators.html">%&gt;=%</a></code></td>
<td><code><a href="https://rdrr.io/r/base/Comparison.html">&gt;=</a></code></td>
</tr>
<tr class="even">
<td><code><a href="reference/relational-operators.html">%&gt;&gt;%</a></code></td>
<td><code><a href="https://rdrr.io/r/base/Comparison.html">&gt;</a></code></td>
</tr>
<tr class="odd">
<td><code><a href="reference/relational-operators.html">%&lt;=%</a></code></td>
<td><code><a href="https://rdrr.io/r/base/Comparison.html">&lt;=</a></code></td>
</tr>
<tr class="even">
<td><code><a href="reference/relational-operators.html">%&lt;&lt;%</a></code></td>
<td><code><a href="https://rdrr.io/r/base/Comparison.html">&lt;</a></code></td>
</tr>
<tr class="odd">
<td><code><a href="reference/relational-operators.html">%==%</a></code></td>
<td><code><a href="https://rdrr.io/r/base/Comparison.html">==</a></code></td>
</tr>
<tr class="even">
<td><code><a href="reference/relational-operators.html">%!=%</a></code></td>
<td><code><a href="https://rdrr.io/r/base/Comparison.html">!=</a></code></td>
</tr>
</tbody>
</table>
<p>These functions use the <code>base</code> relational operators to make comparisons, but incorporate a tolerance value (<code>fpCompare.tolerance</code>) similar to <code>all.equal</code>. The default <code>fpCompare.tolerance</code> value is <code>.Machine$double.eps^0.5</code>, set via <code>options</code>. This is the same default used in <code>all.equal</code> for numeric comparisons.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># set telorance value</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">tol =<span class="st"> </span>.Machine<span class="op">$</span>double.eps<span class="op">^</span><span class="fl">0.5</span>       <span class="co"># default value</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/r/base/options.html">options</a></span>(<span class="dt">fpCompare.tolerance =</span> tol)</a>
<a class="sourceLine" id="cb2-4" data-line-number="4"></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co"># perform comparisons</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6">x1 &lt;-<span class="st"> </span><span class="fl">0.5</span> <span class="op">-</span><span class="st"> </span><span class="fl">0.3</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7">x2 &lt;-<span class="st"> </span><span class="fl">0.3</span> <span class="op">-</span><span class="st"> </span><span class="fl">0.1</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8">x1 <span class="op">==</span><span class="st"> </span>x2         <span class="co"># FALSE on most machines</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9">x1 <span class="op">%==%</span><span class="st"> </span>x2       <span class="co"># TRUE everywhere</span></a></code></pre></div>
</div>
</div>
<div id="installation" class="section level1">
<h1 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h1>
<div id="from-cran" class="section level2">
<h2 class="hasAnchor">
<a href="#from-cran" class="anchor"></a>From CRAN</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"fpCompare"</span>)</a></code></pre></div>
</div>
<div id="from-github" class="section level2">
<h2 class="hasAnchor">
<a href="#from-github" class="anchor"></a>From GitHub</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(devtools)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/pkg/devtools/man/reexports.html">install_github</a></span>(<span class="st">"PredictiveEcology/fpCompare"</span>)</a></code></pre></div>
</div>
</div>
<div id="bug-reports" class="section level1">
<h1 class="hasAnchor">
<a href="#bug-reports" class="anchor"></a>Bug Reports</h1>
<p><a href="https://github.com/PredictiveEcology/fpCompare/issues">https://github.com/PredictiveEcology/fpCompare/issues</a></p>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=fpCompare">https://​cloud.r-project.org/​package=fpCompare</a>
</li>
<li>Browse source code at <br><a href="https://github.com/PredictiveEcology/fpCompare">https://​github.com/​PredictiveEcology/​fpCompare</a>
</li>
<li>Report a bug at <br><a href="https://github.com/PredictiveEcology/fpCompare/issues">https://​github.com/​PredictiveEcology/​fpCompare/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Alex M Chubaty <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/PredictiveEcology/fpCompare"><img src="https://travis-ci.org/PredictiveEcology/fpCompare.svg?branch=master" alt="Build Status"></a></li>
<li><a href="https://coveralls.io/r/PredictiveEcology/fpCompare?branch=master"><img src="https://coveralls.io/repos/PredictiveEcology/fpCompare/badge.svg?branch=master" alt="Coverage Status"></a></li>
<li><a href="https://CRAN.R-project.org/package=fpCompare"><img src="http://www.r-pkg.org/badges/version/fpCompare" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://CRAN.R-project.org/package=fpCompare"><img src="http://cranlogs.r-pkg.org/badges/grand-total/fpCompare" alt="Downloads"></a></li>
<li><a href="https://zenodo.org/badge/latestdoi/17892/PredictiveEcology/fpCompare"><img src="https://zenodo.org/badge/17892/PredictiveEcology/fpCompare.svg" alt="DOI"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Alex M Chubaty.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.0.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
