<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reliable Comparison of Floating Point Numbers • fpCompare</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Reliable Comparison of Floating Point Numbers">
<meta property="og:description" content="Comparisons of floating point numbers are problematic due to errors
    associated with the binary representation of decimal numbers.
    Despite being aware of these problems, people still use numerical methods
    that fail to account for these and other rounding errors (this pitfall is
    the first to be highlighted in Circle 1 of Burns (2012)
    The R Inferno &lt;https://www.burns-stat.com/pages/Tutor/R_inferno.pdf&gt;).
    This package provides new relational operators useful for performing
    floating point number comparisons with a set tolerance.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">fpCompare</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="articles/fpCompare.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/PredictiveEcology/fpCompare/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<div class="section level1">
<div class="page-header"><h1 id="fpcompare">fpCompare<a class="anchor" aria-label="anchor" href="#fpcompare"></a>
</h1></div>
<!-- badges: start -->
<div class="section level2">
<h2 id="reliable-comparison-of-floating-point-numbers">Reliable comparison of floating point numbers<a class="anchor" aria-label="anchor" href="#reliable-comparison-of-floating-point-numbers"></a>
</h2>
<p>Comparisons of floating point numbers are problematic due to errors associated with the binary representation of decimal numbers. Computer scientists and programmers are aware of these problems and yet people still use numerical methods which fail to account for floating point errors (this pitfall is the first to be highlighted in Circle 1 of Burns (2012) <a href="https://www.burns-stat.com/pages/Tutor/R_inferno.pdf" class="external-link">The R Inferno</a>).</p>
<p>To avoid these and other numerical rounding issues, R’s help file for relational operators (<em>e.g.</em>, <code><a href="https://rdrr.io/r/base/Comparison.html" class="external-link">?'&gt;'</a></code>) suggests using <code>identical</code> and <code>all.equal</code> when making numerical comparisons:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x1</span> <span class="op">&lt;-</span> <span class="fl">0.5</span> <span class="op">-</span> <span class="fl">0.3</span></span>
<span><span class="va">x2</span> <span class="op">&lt;-</span> <span class="fl">0.3</span> <span class="op">-</span> <span class="fl">0.1</span></span>
<span><span class="va">x1</span> <span class="op">==</span> <span class="va">x2</span>                           <span class="co"># FALSE on most machines</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">x1</span>, <span class="va">x2</span><span class="op">)</span>, <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># TRUE everywhere</span></span></code></pre></div>
<p>Inspired by <a href="https://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-doesn_0027t-R-think-these-numbers-are-equal_003f" class="external-link">R FAQ 7.31</a> and <a href="https://stackoverflow.com/a/2769618/1380598" class="external-link">this Stack Overflow answer</a>, this package provides new relational operators useful for performing floating point number comparisons with a set tolerance:</p>
<table class="table">
<thead><tr class="header">
<th>
<strong><code>fpCompare</code></strong><a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>
</th>
<th><strong><code>base</code></strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>%&gt;=%</code></td>
<td><code>&gt;=</code></td>
</tr>
<tr class="even">
<td><code>%&gt;&gt;%</code></td>
<td><code>&gt;</code></td>
</tr>
<tr class="odd">
<td><code>%&lt;=%</code></td>
<td><code>&lt;=</code></td>
</tr>
<tr class="even">
<td><code>%&lt;&lt;%</code></td>
<td><code>&lt;</code></td>
</tr>
<tr class="odd">
<td><code>%==%</code></td>
<td><code>==</code></td>
</tr>
<tr class="even">
<td><code>%!=%</code></td>
<td><code>!=</code></td>
</tr>
</tbody>
</table>
<p>These functions use the <code>base</code> relational operators to make comparisons, but incorporate a tolerance value (<code>fpCompare.tolerance</code>) similar to <code>all.equal</code>. The default <code>fpCompare.tolerance</code> value is <code>.Machine$double.eps^0.5</code>, set via <code>options</code>. This is the same default used in <code>all.equal</code> for numeric comparisons.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set telorance value</span></span>
<span><span class="va">tol</span> <span class="op">=</span> <span class="va">.Machine</span><span class="op">$</span><span class="va">double.eps</span><span class="op">^</span><span class="fl">0.5</span>       <span class="co"># default value</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>fpCompare.tolerance <span class="op">=</span> <span class="va">tol</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># perform comparisons</span></span>
<span><span class="va">x1</span> <span class="op">&lt;-</span> <span class="fl">0.5</span> <span class="op">-</span> <span class="fl">0.3</span></span>
<span><span class="va">x2</span> <span class="op">&lt;-</span> <span class="fl">0.3</span> <span class="op">-</span> <span class="fl">0.1</span></span>
<span><span class="va">x1</span> <span class="op">==</span> <span class="va">x2</span>         <span class="co"># FALSE on most machines</span></span>
<span><span class="va">x1</span> <span class="op"><a href="reference/relational-operators.html">%==%</a></span> <span class="va">x2</span>       <span class="co"># TRUE everywhere</span></span></code></pre></div>
</div>
</div>
<div class="section level1">
<h1 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h1>
<div class="section level2">
<h2 id="from-cran">From CRAN<a class="anchor" aria-label="anchor" href="#from-cran"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"fpCompare"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="from-github">From GitHub<a class="anchor" aria-label="anchor" href="#from-github"></a>
</h2>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span></span>
<span><span class="fu">install_github</span><span class="op">(</span><span class="st">"PredictiveEcology/fpCompare"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level1">
<h1 id="bug-reports">Bug Reports<a class="anchor" aria-label="anchor" href="#bug-reports"></a>
</h1>
<p><a href="https://github.com/PredictiveEcology/fpCompare/issues" class="external-link">https://github.com/PredictiveEcology/fpCompare/issues</a></p>
</div>
<div class="footnotes">
<hr>
<ol><li id="fn1"><p>The <code>%&lt;&lt;%</code> and <code>%&gt;&gt;%</code> symbols are used instead of <code>%&lt;%</code> and <code>%&gt;%</code> to avoid a conflict with <code>magrittr</code>’s pipe operator (<code>%&gt;%</code>).<a href="#fnref1" class="footnote-back">↩︎</a></p></li></ol>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=fpCompare" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/PredictiveEcology/fpCompare/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/PredictiveEcology/fpCompare/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing fpCompare</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Alex M Chubaty <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-7146-8135" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/PredictiveEcology/fpCompare/actions" class="external-link"><img src="https://github.com/PredictiveEcology/fpCompare/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
<li><a href="https://CRAN.R-project.org/package=fpCompare" class="external-link"><img src="http://www.r-pkg.org/badges/version/fpCompare" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://CRAN.R-project.org/package=fpCompare" class="external-link"><img src="http://cranlogs.r-pkg.org/badges/grand-total/fpCompare" alt="Downloads"></a></li>
<li><a href="https://zenodo.org/badge/latestdoi/17892/PredictiveEcology/fpCompare" class="external-link"><img src="https://zenodo.org/badge/17892/PredictiveEcology/fpCompare.svg" alt="DOI"></a></li>
<li><a href="https://app.codecov.io/gh/PredictiveEcology/fpCompare?branch=master" class="external-link"><img src="https://codecov.io/gh/PredictiveEcology/fpCompare/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Alex M Chubaty.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
